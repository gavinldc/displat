package com.gc.rpc.common;



import java.util.List;
import java.util.Random;

public class Strings {
	
	public static final String Empty = "";	
	
	public static String left(String s, int len) {
		return s.substring(0, len);
	}
	
	public static String right(String s, int len) {
		return s.substring(s.length() - len, s.length());
	}
	
	public static String trim(String s) {
		return s != null ? s.trim() : s;
	}
	
	public static String addDoubleQuotation(Object s) {
		return "\"" + replaceBlank(s + "") + "\"";
	}
	
	public static String replace(String s, String newStr, String... oldStr) {
		if (!Strings.isNullOrEmpty(s) && oldStr != null) {
			for (String i : oldStr) {
				s = s.replace(i, newStr);
			}
		}
		return s;
	}
	
	public static String implode(String separator, Object... objects) {
		if (objects != null && objects.length > 0) {
			String result = "";
			for (int i = 0;i < objects.length;++i) {
				result += (i == 0 ? objects[i] : separator + objects[i]);
			}
			return result;
		}
		return "";
	}

	public static String generate(String s, int count) {
		String result = "";
		for (int i = 0;i < count;++i) {
			result += s;
		}
		return result;
	}
	
	public static String SBCToDBC(String QJstr) {
	     String outStr="";
	     String Tstr="";
	     byte[] b=null;

	     for(int i=0;i<QJstr.length();i++) {   
	      try {
	       Tstr=QJstr.substring(i,i+1);
	       b=Tstr.getBytes("unicode");
	      }
	      catch(java.io.UnsupportedEncodingException e) {
	       e.printStackTrace();
	      }     
	   
	      if (b[3]==-1) {
	       b[2]=(byte)(b[2]+32);
	       b[3]=0;      
	        
	       try {      
	        outStr=outStr+new String(b,"unicode");
	       }
	       catch(java.io.UnsupportedEncodingException e) {
	        e.printStackTrace();
	       }      
	      }else outStr=outStr+Tstr;
	     }
	     return outStr; 
	}
	
	public static String implode(String separator, List<String> objects) {
		if (objects != null && objects.size() > 0) {
			String result = "";
			for (int i = 0;i < objects.size();++i) {
				result += (i == 0 ? objects.get(i) : separator + objects.get(i));
			}
			return result;
		}
		return "";
	}
	
	public static String[] explode(String separator, String s) {
		return s.split(separator);
	}
	
	public static String getNumber(String s) {
		if (!Strings.isNullOrEmpty(s)) {
			char[] chs = s.toCharArray();
			String result = "";
			for (char c : chs) {
				if (c >= '0' && c <= '9') {
					result += c;
				}
			}
			return result;
		}
		return "";
	}
	
	public static String ucfirst(String s) {
		if (!Strings.isNullOrEmpty(s)) {
			char c = s.charAt(0);
			if (c >= 'a' && c <= 'z') {
				return String.valueOf(c).toUpperCase() 
				+ s.substring(1);
			}
		}
		return s;
	}
	
	public static String lcfirst(String s) {
		if (!Strings.isNullOrEmpty(s)) {
			char c = s.charAt(0);
			if (c >= 'A' && c <= 'Z') {
				return String.valueOf(c).toLowerCase()
				+ s.substring(1);
			}
		}
		return s;
	}
	
	public static String ucwords(String s) {
		if (!Strings.isNullOrEmpty(s)) {
			String[] arr = s.split("\\s");
			String result = "";
			boolean flag = false;
			for (String v : arr) {
				flag = true;
				result += " ";
				if (!Strings.isNullOrEmpty(v)) {
					result += Strings.ucfirst(v);
				}
				else {
					result += v;
				}
			}
			return flag ? result.substring(1) : result;
		}
		return s;
	}
	
	public static String lcwords(String s) {
		if (!Strings.isNullOrEmpty(s)) {
			String[] arr = s.split("\\s");
			String result = "";
			boolean flag = false;
			for (String v : arr) {
				flag = true;
				result += " ";
				if (!Strings.isNullOrEmpty(v)) {
					result += Strings.lcfirst(v);
				}
				else {
					result += v;
				}
			}
			return flag ? result.substring(1) : result;
		}
		return s;
	}
	
	public static boolean isNullOrEmpty(String value) {
		return value == null || "".equals(value.trim());
	}
	
	public static boolean isNullOrEmpty(Object value) {
		if (value == null) {
			return true;
		}
		if (value instanceof String) {
			return "".equals(Strings.trim(String.valueOf(value)));
		}
		return false;
	}
	
	public static boolean itemHasNullOrEmpty(String... strings) {
		if (strings == null) {
			return true;
		}
		for (int i = 0;i < strings.length;++i) {
			if (isNullOrEmpty(strings[i])) {
				return true;
			}
		}
		return false;
	}
	
	private static char[] DEFAULT_HEX_CHAR = {'0', '1', '2', '3', '4', '5', '6', '7',
        '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'};
	
	public static String random(int len) {
        return random(DEFAULT_HEX_CHAR, len);
    }
	
	public static String random(char[] chars, int len) {
		String s = "";
        Random rander = new Random(System.currentTimeMillis());
        for(int i = 0; i< len; ++i) {
            s += chars[rander.nextInt(chars.length)];
        }
        return s;
	}

    /**
     * å§£æ—‡ç·æ¶“ã‚„é‡œç€›æ¥ƒîƒæ¶“è¯§ç´™æ¾¶Ñƒçš¬éæ¬æ™±é°ç‡‚ç´šéŠ†ï¿½
     * <pre>
     * StringUtil.equals(null, null)   = true
     * StringUtil.equals(null, "abc")  = false
     * StringUtil.equals("abc", null)  = false
     * StringUtil.equals("abc", "abc") = true
     * StringUtil.equals("abc", "ABC") = false
     * </pre>
     *
     * @param str1 ç‘•ä½¹ç˜®æˆå†ªæ®‘ç€›æ¥ƒîƒæ¶“ï¿?1
     * @param str2 ç‘•ä½¹ç˜®æˆå†ªæ®‘ç€›æ¥ƒîƒæ¶“ï¿?2
     *
     * @return æ¿¡å‚›ç‰æ¶“ã‚„é‡œç€›æ¥ƒîƒæ¶“èŒ¬æµ‰éšå²‹ç´é´æ ¬ï¿½å‘´å…˜é„ï¿½<code>null</code>é”›å±½å¯æ©æ–¿æ´–<code>true</code>
     */
    public static boolean equals(String str1, String str2) {
        return str1 == null ? str2 == null : str1.equals(str2);
    }

    /**
     * å§£æ—‡ç·æ¶“ã‚„é‡œç€›æ¥ƒîƒæ¶“è¯§ç´™æ¾¶Ñƒçš¬éæ¬ç¬‰éå¿”åŠ…é”›å¤ˆï¿½ï¿½
     * <pre>
     * StringUtil.equalsIgnoreCase(null, null)   = true
     * StringUtil.equalsIgnoreCase(null, "abc")  = false
     * StringUtil.equalsIgnoreCase("abc", null)  = false
     * StringUtil.equalsIgnoreCase("abc", "abc") = true
     * StringUtil.equalsIgnoreCase("abc", "ABC") = true
     * </pre>
     *
     * @param str1 ç‘•ä½¹ç˜®æˆå†ªæ®‘ç€›æ¥ƒîƒæ¶“ï¿?1
     * @param str2 ç‘•ä½¹ç˜®æˆå†ªæ®‘ç€›æ¥ƒîƒæ¶“ï¿?2
     *
     * @return æ¿¡å‚›ç‰æ¶“ã‚„é‡œç€›æ¥ƒîƒæ¶“èŒ¬æµ‰éšå²‹ç´é´æ ¬ï¿½å‘´å…˜é„ï¿½<code>null</code>é”›å±½å¯æ©æ–¿æ´–<code>true</code>
     */
    public static boolean equalsIgnoreCase(String str1, String str2) {
        return str1 == null ? str2 == null : str1.equalsIgnoreCase(str2);
    }

    /**
     * å¦«ï¿½éŒãƒ¥ç“§ç»—ï¸¿è¦†é„îˆšæƒé„îˆœâ”–é§æ–¤ç´?<code>null</code>éŠ†ä½ºâ”–ç?›æ¥ƒîƒæ¶“ï¿?<code>""</code>é´æ §å½§éˆå¤Œâ”–é§è—‰ç“§ç»—ï¸ºï¿½ï¿?
     * <pre>
     * StringUtil.isBlank(null)      = true
     * StringUtil.isBlank("")        = true
     * StringUtil.isBlank(" ")       = true
     * StringUtil.isBlank("bob")     = false
     * StringUtil.isBlank("  bob  ") = false
     * </pre>
     *
     * @param str ç‘•ä½¹î—…éŒãƒ§æ®‘ç€›æ¥ƒîƒæ¶“ï¿?
     *
     * @return æ¿¡å‚›ç‰æ¶“è™¹â”–é§ï¿½, é’æ¬’ç¹‘é¥ï¿?<code>true</code>
     */
    public static boolean isBlank(String str) {
        int length;

        if ((str == null) || ((length = str.length()) == 0)) {
            return true;
        }

        for (int i = 0; i < length; i++) {
            if (!Character.isWhitespace(str.charAt(i))) {
                return false;
            }
        }

        return true;
    }

    /**
     * å¦«ï¿½éŒãƒ¥ç“§ç»—ï¸¿è¦†é„îˆšæƒæ¶“å¶†æ§¸ç»Œè™¹æ«§é”›ï¿?<code>null</code>éŠ†ä½ºâ”–ç?›æ¥ƒîƒæ¶“ï¿?<code>""</code>é´æ §å½§éˆå¤Œâ”–é§è—‰ç“§ç»—ï¸ºï¿½ï¿?
     * <pre>
     * StringUtil.isBlank(null)      = false
     * StringUtil.isBlank("")        = false
     * StringUtil.isBlank(" ")       = false
     * StringUtil.isBlank("bob")     = true
     * StringUtil.isBlank("  bob  ") = true
     * </pre>
     *
     * @param str ç‘•ä½¹î—…éŒãƒ§æ®‘ç€›æ¥ƒîƒæ¶“ï¿?
     *
     * @return æ¿¡å‚›ç‰æ¶“è™¹â”–é§ï¿½, é’æ¬’ç¹‘é¥ï¿?<code>true</code>
     */
    public static boolean isNotBlank(String str) {
        int length;

        if ((str == null) || ((length = str.length()) == 0)) {
            return false;
        }

        for (int i = 0; i < length; i++) {
            if (!Character.isWhitespace(str.charAt(i))) {
                return true;
            }
        }

        return false;
    }

    /**
     * å¦«ï¿½éŒãƒ¥ç“§ç»—ï¸¿è¦†é„îˆšæƒæ¶“ï¿?<code>null</code>é´æ «â”–ç?›æ¥ƒîƒæ¶“ï¿?<code>""</code>éŠ†ï¿½
     * <pre>
     * StringUtil.isEmpty(null)      = true
     * StringUtil.isEmpty("")        = true
     * StringUtil.isEmpty(" ")       = false
     * StringUtil.isEmpty("bob")     = false
     * StringUtil.isEmpty("  bob  ") = false
     * </pre>
     *
     * @param str ç‘•ä½¹î—…éŒãƒ§æ®‘ç€›æ¥ƒîƒæ¶“ï¿?
     *
     * @return æ¿¡å‚›ç‰æ¶“è™¹â”–, é’æ¬’ç¹‘é¥ï¿?<code>true</code>
     */
    public static boolean isEmpty(String str) {
        return ((str == null) || (str.length() == 0));
    }

    /**
     * å¦«ï¿½éŒãƒ¥ç“§ç»—ï¸¿è¦†é„îˆšæƒæ¶“å¶†æ§¸<code>null</code>éœå²€â”–ç?›æ¥ƒîƒæ¶“ï¿?<code>""</code>éŠ†ï¿½
     * <pre>
     * StringUtil.isEmpty(null)      = false
     * StringUtil.isEmpty("")        = false
     * StringUtil.isEmpty(" ")       = true
     * StringUtil.isEmpty("bob")     = true
     * StringUtil.isEmpty("  bob  ") = true
     * </pre>
     *
     * @param str ç‘•ä½¹î—…éŒãƒ§æ®‘ç€›æ¥ƒîƒæ¶“ï¿?
     *
     * @return æ¿¡å‚›ç‰æ¶“å¶„è´Ÿç»Œï¿½, é’æ¬’ç¹‘é¥ï¿?<code>true</code>
     */
    public static boolean isNotEmpty(String str) {
        return ((str != null) && (str.length() > 0));
    }

    /**
     * é¦ã„¥ç“§ç»—ï¸¿è¦†æ¶“î…Ÿç…¡éµç‚¬å¯šç€¹æ°¬ç“§ç»—ï¸¿è¦†é”›å±½è‹Ÿæ©æ–¿æ´–ç»—îƒ¿ç«´æ¶“î„å°®é–°å¶‡æ®‘ç»±ãˆ ç´©éŠç¬ºï¿½å‚šî›§é‹æ»ƒç“§ç»—ï¸¿è¦†æ¶“ï¿?<code>null</code>é´æ ¨æ¹­éµæƒ§åŸŒé”›å±½å¯æ©æ–¿æ´–<code>-1</code>éŠ†ï¿½
     * <pre>
     * StringUtil.indexOf(null, *)          = -1
     * StringUtil.indexOf(*, null)          = -1
     * StringUtil.indexOf("", "")           = 0
     * StringUtil.indexOf("aabaabaa", "a")  = 0
     * StringUtil.indexOf("aabaabaa", "b")  = 2
     * StringUtil.indexOf("aabaabaa", "ab") = 1
     * StringUtil.indexOf("aabaabaa", "")   = 0
     * </pre>
     *
     * @param str ç‘•ä½¹å£‚é»å¿•æ®‘ç€›æ¥ƒîƒæ¶“ï¿?
     * @param searchStr ç‘•ä½¹ç…¡éµå‰§æ®‘ç€›æ¥ƒîƒæ¶“ï¿?
     *
     * @return ç»—îƒ¿ç«´æ¶“î„å°®é–°å¶‡æ®‘ç»±ãˆ ç´©éŠç¬ºï¿½å‚šî›§é‹æ»ƒç“§ç»—ï¸¿è¦†æ¶“ï¿?<code>null</code>é´æ ¨æ¹­éµæƒ§åŸŒé”›å±½å¯æ©æ–¿æ´–<code>-1</code>
     */
    public static int indexOf(String str, String searchStr) {
        if ((str == null) || (searchStr == null)) {
            return -1;
        }

        return str.indexOf(searchStr);
    }

    /**
     * é¦ã„¥ç“§ç»—ï¸¿è¦†æ¶“î…Ÿç…¡éµç‚¬å¯šç€¹æ°¬ç“§ç»—ï¸¿è¦†é”›å±½è‹Ÿæ©æ–¿æ´–ç»—îƒ¿ç«´æ¶“î„å°®é–°å¶‡æ®‘ç»±ãˆ ç´©éŠç¬ºï¿½å‚šî›§é‹æ»ƒç“§ç»—ï¸¿è¦†æ¶“ï¿?<code>null</code>é´æ ¨æ¹­éµæƒ§åŸŒé”›å±½å¯æ©æ–¿æ´–<code>-1</code>éŠ†ï¿½
     * <pre>
     * StringUtil.indexOf(null, *, *)          = -1
     * StringUtil.indexOf(*, null, *)          = -1
     * StringUtil.indexOf("", "", 0)           = 0
     * StringUtil.indexOf("aabaabaa", "a", 0)  = 0
     * StringUtil.indexOf("aabaabaa", "b", 0)  = 2
     * StringUtil.indexOf("aabaabaa", "ab", 0) = 1
     * StringUtil.indexOf("aabaabaa", "b", 3)  = 5
     * StringUtil.indexOf("aabaabaa", "b", 9)  = -1
     * StringUtil.indexOf("aabaabaa", "b", -1) = 2
     * StringUtil.indexOf("aabaabaa", "", 2)   = 2
     * StringUtil.indexOf("abc", "", 9)        = 3
     * </pre>
     *
     * @param str ç‘•ä½¹å£‚é»å¿•æ®‘ç€›æ¥ƒîƒæ¶“ï¿?
     * @param searchStr ç‘•ä½¹ç…¡éµå‰§æ®‘ç€›æ¥ƒîƒæ¶“ï¿?
     * @param startPos å¯®ï¿½æ¿®å¬«æ‚³ç»±ãˆ¢æ®‘ç»±ãˆ ç´©éŠç¡·ç´æ¿¡å‚›ç‰çå¿ç°¬0é”›å±½å¯éªå¬©ç¶”0
     *
     * @return ç»—îƒ¿ç«´æ¶“î„å°®é–°å¶‡æ®‘ç»±ãˆ ç´©éŠç¬ºï¿½å‚šî›§é‹æ»ƒç“§ç»—ï¸¿è¦†æ¶“ï¿?<code>null</code>é´æ ¨æ¹­éµæƒ§åŸŒé”›å±½å¯æ©æ–¿æ´–<code>-1</code>
     */
    public static int indexOf(String str, String searchStr, int startPos) {
        if ((str == null) || (searchStr == null)) {
            return -1;
        }

        // JDK1.3é™å©äº’æ¶“å¬¬å¢—éˆî„‚æ®‘bugé”›æ°«ç¬‰é‘³èŠ¥î„œçº­î†¼î˜©éå—•ç¬…é—ˆãˆ¢æ®‘é¯å‘­å–Œ
        if ((searchStr.length() == 0) && (startPos >= str.length())) {
            return str.length();
        }

        return str.indexOf(searchStr, startPos);
    }

    /**
     * é™æ ¨å¯šç?¹æ°¬ç“§ç»—ï¸¿è¦†é¨å‹«ç“™æ¶“å±‚ï¿½ï¿?
     * 
     * <p>
     * ç’ç†ºæ®‘ç»±ãˆ ç´©æµ ï½ˆã€ƒæµ åº¡ç†¬é–®ã„¥ç´‘æ¿®å¬­î…¸ç» æ¤¼ï¿½å‚šî›§é‹æ»ƒç“§ç»—ï¸¿è¦†æ¶“ï¿?<code>null</code>é”›å±½å¯æ©æ–¿æ´–<code>null</code>éŠ†ï¿½
     * <pre>
     * StringUtil.substring(null, *, *)    = null
     * StringUtil.substring("", * ,  *)    = "";
     * StringUtil.substring("abc", 0, 2)   = "ab"
     * StringUtil.substring("abc", 2, 0)   = ""
     * StringUtil.substring("abc", 2, 4)   = "c"
     * StringUtil.substring("abc", 4, 6)   = ""
     * StringUtil.substring("abc", 2, 2)   = ""
     * StringUtil.substring("abc", -2, -1) = "b"
     * StringUtil.substring("abc", -4, 2)  = "ab"
     * </pre>
     * </p>
     *
     * @param str ç€›æ¥ƒîƒæ¶“ï¿?
     * @param start ç’§å³°îç»±ãˆ ç´©é”›å±½î›§é‹æ»?è´Ÿç’ç†¸æšŸé”›å²ƒã€ƒç»€è½°ç² çé¹ƒå„´ç’ï¼„ç•»
     * @param end ç¼æ’´æ½«ç»±ãˆ ç´©é”›å œç¬‰éšî‚¬ç´šé”›å±½î›§é‹æ»?è´Ÿç’ç†¸æšŸé”›å²ƒã€ƒç»€è½°ç² çé¹ƒå„´ç’ï¼„ç•»
     *
     * @return ç€›æ„ªè¦†é”›å±½î›§é‹æ»ƒå¸«æ¿®å¬©è¦†æ¶“ï¿½<code>null</code>é”›å±½å¯æ©æ–¿æ´–<code>null</code>
     */
    public static String substring(String str, int start, int end) {
        if (str == null) {
            return null;
        }

        if (end < 0) {
            end = str.length() + end;
        }

        if (start < 0) {
            start = str.length() + start;
        }

        if (end > str.length()) {
            end = str.length();
        }

        if (start > end) {
            return "";
        }

        if (start < 0) {
            start = 0;
        }

        if (end < 0) {
            end = 0;
        }

        return str.substring(start, end);
    }

    /**
     * å¦«ï¿½éŒãƒ¥ç“§ç»—ï¸¿è¦†æ¶“î…Ÿæ§¸éšï¹?å¯˜éšî‚£å¯šç€¹æ°±æ®‘ç?›æ¥ƒîƒæ¶“å±‚ï¿½å‚šî›§é‹æ»ƒç“§ç»—ï¸¿è¦†æ¶“ï¿½<code>null</code>é”›å±½çš¢æ©æ–¿æ´–<code>false</code>éŠ†ï¿½
     * <pre>
     * StringUtil.contains(null, *)     = false
     * StringUtil.contains(*, null)     = false
     * StringUtil.contains("", "")      = true
     * StringUtil.contains("abc", "")   = true
     * StringUtil.contains("abc", "a")  = true
     * StringUtil.contains("abc", "z")  = false
     * </pre>
     *
     * @param str ç‘•ä½¹å£‚é»å¿•æ®‘ç€›æ¥ƒîƒæ¶“ï¿?
     * @param searchStr ç‘•ä½¹ç…¡éµå‰§æ®‘ç€›æ¥ƒîƒæ¶“ï¿?
     *
     * @return æ¿¡å‚›ç‰éµæƒ§åŸŒé”›å±½å¯æ©æ–¿æ´–<code>true</code>
     */
    public static boolean contains(String str, String searchStr) {
        if ((str == null) || (searchStr == null)) {
            return false;
        }

        return str.indexOf(searchStr) >= 0;
    }

    /**
     * <p>Checks if the String contains only unicode digits.
     * A decimal point is not a unicode digit and returns false.</p>
     *
     * <p><code>null</code> will return <code>false</code>.
     * An empty String ("") will return <code>true</code>.</p>
     *
     * <pre>
     * StringUtils.isNumeric(null)   = false
     * StringUtils.isNumeric("")     = true
     * StringUtils.isNumeric("  ")   = false
     * StringUtils.isNumeric("123")  = true
     * StringUtils.isNumeric("12 3") = false
     * StringUtils.isNumeric("ab2c") = false
     * StringUtils.isNumeric("12-3") = false
     * StringUtils.isNumeric("12.3") = false
     * </pre>
     *
     * @param str  the String to check, may be null
     * @return <code>true</code> if only contains digits, and is non-null
     */
    public static boolean isNumeric(String str) {
        if (str == null) {
            return false;
        }
        int sz = str.length();
        for (int i = 0; i < sz; i++) {
            if (Character.isDigit(str.charAt(i)) == false) {
                return false;
            }
        }
        return true;
    }
    
    public static String replaceBlank(String str) {
    	/*if (str != null) {
    		Pattern p = Pattern.compile("\\s*|\r|\n");
    		return p.matcher(str).replaceAll("");
    	}*/
    	return str;
    }
    
    public static String escape(String src) {  
        int i;  
        char j;  
        StringBuffer tmp = new StringBuffer();  
        tmp.ensureCapacity(src.length() * 6);  
        for (i = 0; i < src.length(); i++) {  
            j = src.charAt(i);  
            if (Character.isDigit(j) || Character.isLowerCase(j)  
                    || Character.isUpperCase(j))  
                tmp.append(j);  
            else if (j < 256) {  
                tmp.append("%");  
                if (j < 16)  
                    tmp.append("0");  
                tmp.append(Integer.toString(j, 16));  
            } else {  
                tmp.append("%u");  
                tmp.append(Integer.toString(j, 16));  
            }  
        }  
        return tmp.toString();  
    }
    
    public static String unescape(String src) {  
        StringBuffer tmp = new StringBuffer();  
        tmp.ensureCapacity(src.length());  
        int lastPos = 0, pos = 0;  
        char ch;  
        while (lastPos < src.length()) {  
            pos = src.indexOf("%", lastPos);  
            if (pos == lastPos) {  
                if (src.charAt(pos + 1) == 'u') {  
                    ch = (char) Integer.parseInt(src  
                            .substring(pos + 2, pos + 6), 16);  
                    tmp.append(ch);  
                    lastPos = pos + 6;  
                } else {  
                    ch = (char) Integer.parseInt(src  
                            .substring(pos + 1, pos + 3), 16);  
                    tmp.append(ch);  
                    lastPos = pos + 3;  
                }  
            } else {  
                if (pos == -1) {  
                    tmp.append(src.substring(lastPos));  
                    lastPos = src.length();  
                } else {  
                    tmp.append(src.substring(lastPos, pos));  
                    lastPos = pos;  
                }  
            }  
        }  
        return tmp.toString();  
    }
    
    public static void main(String[] args) {
    	String s = "é”›ï¿½#é”›å±¼è…‘é—‚ç¿ æ±‰";
    	System.out.println(SBCToDBC(s));
    }
	
}
